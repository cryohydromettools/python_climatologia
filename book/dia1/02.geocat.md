# Instalación del ambiente virtual GeoCAT

Apesar de haber instalado un ambiente virtual para la instalación del Python (miniconda3), es necesario instalar el GeoCAT en un ambiente virtual aparate. Esto se debe a la compatibilidad de bibliotecas.

1. Una vez dentro del `miniconda` (identificado por algo semejante a `(base)grupo@usuario: `), crea el ambiente para el `geocat`:
```bash
conda create -n geocat -c conda-forge geocat-comp
```

![](./figs_linux/ambiente_geocat.png)

Luego de esto aparece un mensaje preguntando si estas de acuerdo en instalar las bibliotecas necesarias:

![](./figs_linux/geocat_yes.png)

Despues de este proceso aparecerá un mensaje mostrando como activar el ambiente virtual de `geocat`:

![](./figs_linux/activate_geocat.png)


2. Activa el entorno virtual `geocat` e instala las bibliotecas necesárias para su uso:
- primero escriba el comando
```bash
conda activate geocat
```
- despues el siguiente comando para la instalacion de las bibliotecas

```bash
conda install -c conda-forge matplotlib cartopy jupyter
```

Debe obtener un resultado semejante a este.
![](./figs_linux/install_bibs_geocat.png)

3. Normalmente la biblioteca [geocat-f2py](https://geocat-f2py.readthedocs.io/en/latest/installation.html) viene instalada, sin embargo si existe la necesidad de hacer una nueva instalación prueba con:

```bash
conda install -c conda-forge geocat-f2py
```

4. Para crear el ambiente virtual de para hacer pruebas con scripts disponibles:

```bash
conda env create -f conda_environment.yml -n geocat-examples
```

5. Crear el `geocat-viz`
```bash
conda create -n geocat -c conda-forge -c ncar geocat-viz
```

Despues de un momento aparecera un informe de los procesos que serán realizados, en la parte final preguntará si deseas proseguir. Escribe `y` o simplemente presiona `enter`.
```bash
...
  tornado            conda-forge/linux-64::tornado-6.2-py38h0a891b7_0 None
  traitlets          conda-forge/noarch::traitlets-5.4.0-pyhd8ed1ab_0 None
  urllib3            conda-forge/noarch::urllib3-1.26.11-pyhd8ed1ab_0 None
  wheel              conda-forge/noarch::wheel-0.37.1-pyhd8ed1ab_0 None
  xarray             conda-forge/noarch::xarray-2022.10.0-pyhd8ed1ab_0 None
  xz                 conda-forge/linux-64::xz-5.2.6-h166bdaf_0 None
  zstd               conda-forge/linux-64::zstd-1.5.2-h6239696_4 None


Proceed ([y]/n)? y
```

La instalacion debe concluir sin problemas y retornar el siguiente mensaje:

```bash
#
# To activate this environment, use
#
#     $ conda activate geocat
#
# To deactivate an active environment, use
#
#     $ conda deactivate

Retrieving notices: ...working... done
```

> **Nota** si deseas instalar todas las dependencias al momento de crear el ambiente virtual es simplemente anexarlos:
```bash
conda create -n geocat -c conda-forge -c ncar geocat-comp geocat-viz geocat-f2py matplotlib cartopy wrf-python jupyterlab geocat-datafiles
```


6. Finalmente, podras ver una lista de los paquetes instalados en tu ambiente virtual utilizando el comando `pip list`:
- Para esto debes activar el ambiente virtual:

```bash
conda activate geocat
```

![](./figs_linux/pip_list.png)

## Retornar al [índice](./../indice.md)